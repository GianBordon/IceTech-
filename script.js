// PRODUCTOS
const productos = [
    //Auriculares
    {
        id: "auricular-01",
        titulo: "Auricular 01",
        imagen: "./assets/img/Auriculares/Auricular_01.jpg",
        categorias: {
            nombre: "Auriculares",
            id: "auriculares"
        },
        precio: 11000,
        cantidad: 1,
    },
    {
        id: "auricular-02",
        titulo: "Auricular 02",
        imagen: "./assets/img/Auriculares/Auricular_02.jpg",
        categorias: {
            nombre: "Auriculares",
            id: "auriculares"
        },
        precio: 18000,
        cantidad: 1,
    },
    {
        id: "auricular-03",
        titulo: "Auricular 03",
        imagen: "./assets/img/Auriculares/Auricular_03.jpg",
        categorias: {
            nombre: "Auriculares",
            id: "auriculares"
        },
        precio: 11000,
        cantidad: 1,
    },
    {
        id: "auricular-04",
        titulo: "Auricular 04",
        imagen: "./assets/img/Auriculares/Auricular_04.jpg",
        categorias: {
            nombre: "Auriculares",
            id: "auriculares"
        },
        precio: 20000,
        cantidad: 1,
    },
    {
        id: "auricular-06",
        titulo: "Auricular 06",
        imagen: "./assets/img/Auriculares/Auricular_06.jpg",
        categorias: {
            nombre: "Auriculares",
            id: "auriculares"
        },
        precio: 13000,
        cantidad: 1,
    },
// CAMARA
        {
        id: "camara-01",
        titulo: "Camara 01",
        imagen: "./assets/img/Camara/Camara_01.jpg",
        categorias: {
            nombre: "Camara",
            id: "camara"
        },
        precio: 28000,
        cantidad: 1,
    },
    {
        id: "camara-02",
        titulo: "Camara 02",
        imagen: "./assets/img/Camara/Camara_02.jpg",
        categorias: {
            nombre: "Camara",
            id: "camara"
        },
        precio: 8000,
        cantidad: 1,
    },
    {
        id: "camara-03",
        titulo: "Camara 03",
        imagen: "./assets/img/Camara/Camara_03.jpg",
        categorias: {
            nombre: "Camara",
            id: "camara"
        },
        precio: 9000,
        cantidad: 1,
    },
    {
        id: "camara-04",
        titulo: "Camara 04",
        imagen: "./assets/img/Camara/Camara_04.jpg",
        categorias: {
            nombre: "Camara",
            id: "camara"
        },
        precio: 10000,
        cantidad: 1,
    },
    {
        id: "camara-05",
        titulo: "Camara 05",
        imagen: "./assets/img/Camara/Camara_05.jpg",
        categorias: {
            nombre: "Camara",
            id: "camara"
        },
        precio: 7500,
        cantidad: 1,
    },
    {
        id: "camara-06",
        titulo: "Camara 06",
        imagen: "./assets/img/Camara/Camara_06.jpg",
        categorias: {
            nombre: "Camara",
            id: "camara"
        },
        precio: 26000,
        cantidad: 1,
    },
    {
        id: "camara-07",
        titulo: "Camara 07",
        imagen: "./assets/img/Camara/Camara_07.jpg",
        categorias: {
            nombre: "Camara",
            id: "camara"
        },
        precio: 7500,
        cantidad: 1,
    },
    {
        id: "camara-08",
        titulo: "Camara 08",
        imagen: "./assets/img/Camara/Camara_08.jpg",
        categorias: {
            nombre: "Camara",
            id: "camara"
        },
        precio: 8500,
        cantidad: 1,
    },
//JoyStick
    {
        id: "joystick-01",
        titulo: "JoyStick 01",
        imagen: "./assets/img/JoyStick/JoyStick_01.jpg",
        categorias: {
            nombre: "Joystick",
            id: "joystick"
        },
        precio: 16000,
        cantidad: 1,
    },
    {
        id: "joystick-02",
        titulo: "JoyStick 02",
        imagen: "./assets/img/JoyStick/JoyStick_02.jpg",
        categorias: {
            nombre: "Joystick",
            id: "joystick"
        },
        precio: 7000,
        cantidad: 1,
    },
    {
        id: "joystick-03",
        titulo: "JoyStick 03",
        imagen: "./assets/img/JoyStick/JoyStick_03.jpg",
        categorias: {
            nombre: "Joystick",
            id: "joystick"
        },
        precio: 5000,
        cantidad: 1,
    },
    {
        id: "joystick-04",
        titulo: "JoyStick 04",
        imagen: "./assets/img/JoyStick/JoyStick_04.jpg",
        categorias: {
            nombre: "Joystick",
            id: "joystick"
        },
        precio: 9000,
        cantidad: 1,
    },
    {
        id: "joystick-05",
        titulo: "JoyStick 05",
        imagen: "./assets/img/JoyStick/JoyStick_05.jpg",
        categorias: {
            nombre: "Joystick",
            id: "joystick"
        },
        precio: 4000,
        cantidad: 1,
    },
//Microfono
    {
        id: "microfono-01",
        titulo: "Microfono 01",
        imagen: "./assets/img/Microfono/Microfono_01.jpg",
        categorias: {
            nombre: "Microfono",
            id: "microfono"
        },
        precio: 14000,
        cantidad: 1,
    },
    {
        id: "microfono-02",
        titulo: "Microfono 02",
        imagen: "./assets/img/Microfono/Microfono_02.jpg",
        categorias: {
            nombre: "Microfono",
            id: "microfono"
        },
        precio: 15000,
        cantidad: 1,
    },
    {
        id: "microfono-03",
        titulo: "Microfono 03",
        imagen: "./assets/img/Microfono/Microfono_03.jpg",
        categorias: {
            nombre: "Microfono",
            id: "microfono"
        },
        precio: 22000,
        cantidad: 1,
    },
    {
        id: "microfono-04",
        titulo: "Microfono 04",
        imagen: "./assets/img/Microfono/Microfono_04.jpg",
        categorias: {
            nombre: "Microfono",
            id: "microfono"
        },
        precio: 33000,
        cantidad: 1,
    },
    {
        id: "microfono-05",
        titulo: "Microfono 05",
        imagen: "./assets/img/Microfono/Microfono_05.jpg",
        categorias: {
            nombre: "Microfono",
            id: "microfono"
        },
        precio: 41500,
        cantidad: 1,
    },
    {
        id: "microfono-06",
        titulo: "Microfono 06",
        imagen: "./assets/img/Microfono/Microfono_06.jpg",
        categorias: {
            nombre: "Microfono",
            id: "microfono"
        },
        precio: 55000,
        cantidad: 1,
    },
    {
        id: "microfono-07",
        titulo: "Microfono 07",
        imagen: "./assets/img/Microfono/Microfono_07.jpg",
        categorias: {
            nombre: "Microfono",
            id: "microfono"
        },
        precio: 37000,
        cantidad: 1,
    },
    {
        id: "microfono-08",
        titulo: "Microfono 08",
        imagen: "./assets/img/Microfono/Microfono_08.jpg",
        categorias: {
            nombre: "Microfono",
            id: "microfono"
        },
        precio: 35000,
        cantidad: 1,
    },
    // MONITORES
    {
        id: "monitor-01",
        titulo: "Monitor 01",
        imagen: "./assets/img/Monitor/Monitor_01.jpg",
        categorias: {
            nombre: "Monitor",
            id: "monitor"
        },
        precio: 45000,
        cantidad: 1,
    },
    {
        id: "monitor-02",
        titulo: "Monitor 02",
        imagen: "./assets/img/Monitor/Monitor_02.jpg",
        categorias: {
            nombre: "Monitor",
            id: "monitor"
        },
        precio: 37000,
        cantidad: 1,
    },
    {
        id: "monitor-03",
        titulo: "Monitor 03",
        imagen: "./assets/img/Monitor/Monitor_03.jpg",
        categorias: {
            nombre: "Monitor",
            id: "monitor"
        },
        precio: 48000,
        cantidad: 1,
    },
    {
        id: "monitor-04",
        titulo: "Monitor 04",
        imagen: "./assets/img/Monitor/Monitor_04.jpg",
        categorias: {
            nombre: "Monitor",
            id: "monitor"
        },
        precio: 92000,
        cantidad: 1,
    },
    {
        id: "monitor-05",
        titulo: "Monitor 05",
        imagen: "./assets/img/Monitor/Monitor_05.jpg",
        categorias: {
            nombre: "Monitor",
            id: "monitor"
        },
        precio: 50500,
        cantidad: 1,
    },
    {
        id: "monitor-06",
        titulo: "Monitor 06",
        imagen: "./assets/img/Monitor/Monitor_06.jpg",
        categorias: {
            nombre: "Monitor",
            id: "monitor"
        },
        precio: 41500,
        cantidad: 1,
    },
    {
        id: "monitor-07",
        titulo: "Monitor 07",
        imagen: "./assets/img/Monitor/Monitor_07.jpg",
        categorias: {
            nombre: "Monitor",
            id: "monitor"
        },
        precio: 100000,
        cantidad: 1,
    },
    // MOUSE
    {
        id: "mouse-01",
        titulo: "Mouse 01",
        imagen: "./assets/img/Mouse/Mouse_01.jpg",
        categorias: {
            nombre: "Mouse",
            id: "mouse"
        },
        precio: 7500,
        cantidad: 1,
    },
    {
        id: "mouse-02",
        titulo: "Mouse 02",
        imagen: "./assets/img/Mouse/Mouse_02.jpg",
        categorias: {
            nombre: "Mouse",
            id: "mouse"
        },
        precio: 2000,
        cantidad: 1,
    },
    {
        id: "mouse-03",
        titulo: "Mouse 03",
        imagen: "./assets/img/Mouse/Mouse_03.jpg",
        categorias: {
            nombre: "Mouse",
            id: "mouse"
        },
        precio: 5500,
        cantidad: 1,
    },
    {
        id: "mouse-04",
        titulo: "Mouse 04",
        imagen: "./assets/img/Mouse/Mouse_04.jpg",
        categorias: {
            nombre: "Mouse",
            id: "mouse"
        },
        precio: 1500,
        cantidad: 1,
    },
    {
        id: "mouse-05",
        titulo: "Mouse 05",
        imagen: "./assets/img/Mouse/Mouse_05.jpg",
        categorias: {
            nombre: "Mouse",
            id: "mouse"
        },
        precio: 5000,
        cantidad: 1,
    },
    {
        id: "mouse-06",
        titulo: "Mouse 06",
        imagen: "./assets/img/Mouse/Mouse_06.jpg",
        categorias: {
            nombre: "Mouse",
            id: "mouse"
        },
        precio: 4500,
        cantidad: 1,
    },
    {
        id: "mouse-07",
        titulo: "Mouse 07",
        imagen: "./assets/img/Mouse/Mouse_07.jpg",
        categorias: {
            nombre: "Mouse",
            id: "mouse"
        },
        precio: 4000,
        cantidad: 1,
    },
    {
        id: "mouse-08",
        titulo: "Mouse 08",
        imagen: "./assets/img/Mouse/Mouse_08.jpg",
        categorias: {
            nombre: "Mouse",
            id: "mouse"
        },
        precio: 5000,
        cantidad: 1,
    },
    // PARLANTES
    {
        id: "parlante-01",
        titulo: "Parlante 01",
        imagen: "./assets/img/Parlantes/Parlantes_01.jpg",
        categorias: {
            nombre: "Parlante",
            id: "parlante"
        },
        precio: 13500,
        cantidad: 1,
    },
    {
        id: "parlante-02",
        titulo: "Parlante 02",
        imagen: "./assets/img/Parlantes/Parlantes_02.jpg",
        categorias: {
            nombre: "Parlante",
            id: "parlante"
        },
        precio: 20000,
        cantidad: 1,
    },
    {
        id: "parlante-03",
        titulo: "Parlante 03",
        imagen: "./assets/img/Parlantes/Parlantes_03.jpg",
        categorias: {
            nombre: "Parlante",
            id: "parlante"
        },
        precio: 8500,
        cantidad: 1,
    },
    {
        id: "parlante-04",
        titulo: "Parlante 04",
        imagen: "./assets/img/Parlantes/Parlantes_04.jpg",
        categorias: {
            nombre: "Parlante",
            id: "parlante"
        },
        precio: 3500,
        cantidad: 1,
    },
    // TECLADO
    {
        id: "teclado-01",
        titulo: "Teclado 01",
        imagen: "./assets/img/Teclado/Teclado_01.jpg",
        categorias: {
            nombre: "Teclado",
            id: "teclado"
        },
        precio: 7500,
        cantidad: 1,
    },
    {
        id: "teclado-02",
        titulo: "Teclado 02",
        imagen: "./assets/img/Teclado/Teclado_02.jpg",
        categorias: {
            nombre: "Teclado",
            id: "teclado"
        },
        precio: 5500,
        cantidad: 1,
    },
    {
        id: "teclado-03",
        titulo: "Teclado 03",
        imagen: "./assets/img/Teclado/Teclado_03.jpg",
        categorias: {
            nombre: "Teclado",
            id: "teclado"
        },
        precio: 8000,
        cantidad: 1,
    },
    {
        id: "teclado-04",
        titulo: "Teclado 04",
        imagen: "./assets/img/Teclado/Teclado_04.jpg",
        categorias: {
            nombre: "Teclado",
            id: "teclado"
        },
        precio: 2500,
        cantidad: 1,
    },
    {
        id: "teclado-51",
        titulo: "Teclado 05",
        imagen: "./assets/img/Teclado/Teclado_05.jpg",
        categorias: {
            nombre: "Teclado",
            id: "teclado"
        },
        precio: 13500,
        cantidad: 1,
    },
    {
        id: "teclado-07",
        titulo: "Teclado 07",
        imagen: "./assets/img/Teclado/Teclado_07.jpg",
        categorias: {
            nombre: "Teclado",
            id: "teclado"
        },
        precio: 9000,
        cantidad: 1,
    },
    {
        id: "teclado-08",
        titulo: "Teclado 08",
        imagen: "./assets/img/Teclado/Teclado_08.jpg",
        categorias: {
            nombre: "Teclado",
            id: "teclado"
        },
        precio: 16500,
        cantidad: 1,
    },
];

const iceContent = document.getElementById("ice-content");
const verCarrito = document.getElementById("verCarrito")
const modalContent = document.getElementById("modal-content")

let carrito = JSON.parse(localStorage.getItem("carrito")) || [];


productos.forEach((product) => {
    let content = document.createElement("div");
    content.className = "card";
    content.innerHTML = `
        <img  src="${product.imagen}">
        <h3>${product.titulo}</h3>
        <p class="precio">${product.precio}</p>
        `;
    iceContent.append(content);

    let comprar = document.createElement("button")
    comprar.innerText = "comprar";
    comprar.className = "comprar";

    content.append(comprar);

    comprar.addEventListener("click", () => {
    
    const repeat = carrito.some ((repeatProduct) => repeatProduct.id === product.id );
    if (repeat){
        carrito.map((prod) => {
            if (prod.id === product.id){
                prod.cantidad++;
            }
        })
    } else { 
        carrito.push({
            id : product.id,
            img: product.imagen,
            nombre: product.titulo,
            precio: product.precio,
            cantidad: product.cantidad,
        });
        console.table(carrito);
        saveLocal();
    }   
    });
});

const saveLocal = () => {
    localStorage.setItem("carrito", JSON.stringify(carrito))    
}

const pintarCarrito = () => { 
    modalContent.innerHTML = "";
    modalContent.style.display ="flex"
    const modalHeader = document.createElement("div");
    modalHeader.className = "modal-header"
    modalHeader.innerHTML = `
        <h1 class="modal-header-titulo">Carrito</h1>
    `;
    modalContent.append(modalHeader);

    const modalButton = document.createElement("h1");
    modalButton.innerHTML = `✖`;
    modalButton.className = ("modal-header-button");

    modalButton.addEventListener("click", () => {
        modalContent.style.display = "none";
    });

    modalHeader.append(modalButton)

    carrito.forEach((product) => {
        let carritoContent = document.createElement("div");
        carritoContent.className = ("modal-contents");
        carritoContent.innerHTML= `
            <img src="${product.img}">
            <h3>${product.nombre}</h3>
            <p>${product.precio} $</p>
            <span class="restar"> - </span>
            <p>Cantidad: ${product.cantidad}</p>
            <span class="sumar"> + </span>
            <p>Total: ${product.cantidad * product.precio}</p>
            <span class="eliminar-producto">❌</span>
    `;

    modalContent.append(carritoContent)

    let restar = carritoContent.querySelector(".restar")
    restar.addEventListener("click", () => {   
        if (product.cantidad !== 1) {
            product.cantidad--;
        }
        saveLocal()
        pintarCarrito();
    })
    let sumar = carritoContent.querySelector(".sumar")
    sumar.addEventListener("click", () =>{
        product.cantidad++;
        saveLocal();
        pintarCarrito()
    })

    
    let eliminar = carritoContent.querySelector(".eliminar-producto");
    
    eliminar.addEventListener("click", () =>{
        elmiinarProducto(product.id)
    });

    eliminar.addEventListener("click", elmiinarProducto)
    })

    const total = carrito.reduce((acc, el) => acc + el.precio * el.cantidad, 0);

    const totalCompra = document.createElement("div");
    totalCompra.className = "total-content";
    totalCompra.innerHTML = `Total a pagar con IVA: ${total * 1.21} $`;
    
    modalContent.append(totalCompra);
};

verCarrito.addEventListener("click", (pintarCarrito));

const elmiinarProducto = (id) => {
    const foundId = carrito.find((element) => element.id === id);

    carrito = carrito.filter((carritoId) => {
        return carritoId !== foundId; 
    });
    pintarCarrito ();
    saveLocal();
}
